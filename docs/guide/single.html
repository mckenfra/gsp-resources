<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>GSP Resources 0.3</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#1.%20Overview"><strong>1</strong><span>Overview</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#2.%20Installation"><strong>2</strong><span>Installation</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#3.%20Usage"><strong>3</strong><span>Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#4.%20Limitations"><strong>4</strong><span>Limitations</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#5.%20Advanced%20Configuration"><strong>5</strong><span>Advanced Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#6.%20Version%20History"><strong>6</strong><span>Version History</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#7.%20Special%20Thanks"><strong>7</strong><span>Special Thanks</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p>Use resources plugin to serve dynamically-built CSS and JS as static files instead of dynamic (non-cacheable) GSPs.</p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>GSP Resources - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Stefan Kendall, Francis McKenzie</p>
                            <p><strong>Version:</strong> 0.3</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#1.%20Overview"><strong>1</strong><span>Overview</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#2.%20Installation"><strong>2</strong><span>Installation</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#3.%20Usage"><strong>3</strong><span>Usage</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#4.%20Limitations"><strong>4</strong><span>Limitations</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#5.%20Advanced%20Configuration"><strong>5</strong><span>Advanced Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#6.%20Version%20History"><strong>6</strong><span>Version History</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#7.%20Special%20Thanks"><strong>7</strong><span>Special Thanks</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="1. Overview">1 Overview</h1>
This plugin allows you to reference GSP-generated files as cacheable static resources.
Consider the following:<p class="paragraph"/><h3>fibonacci.js.gsp</h3>
<div class="code"><pre>&#60;% fib = &#123;n &#45;&#62;; <span class="java&#45;keyword">return</span> n &#60;= 1 ? n : fib(n&#45;1) + fib(n&#45;2)&#125; %&#62;
<span class="java&#45;keyword">var</span> fibonacci = &#91;&#60;%= (0..10).collect&#123; fib.call(it) &#125;.join(',') %&#62;&#93;;</pre></div><p class="paragraph"/>This is then cacheable and serveable as a javascript file as:<p class="paragraph"/><h3>fibonacci.js</h3>
<div class="code"><pre><span class="java&#45;keyword">var</span> fibonacci = &#91;0,1,1,2,3,5,8,13,21,34,55&#93;;</pre></div>



<h1 id="2. Installation">2 Installation</h1>
The preferred method for installing plugins is to add a plugin dependency
in <code>grails-app/conf/BuildConfig.groovy</code>, i.e.:<p class="paragraph"/><div class="code"><pre>plugins &#123;
    // Other plugin dependencies here
    // . . .
    // . . .<p class="paragraph"/>    runtime ':gsp&#45;resources:latest.integration'
&#125;</pre></div><p class="paragraph"/>Alternatively, you can install manually with the following command:<p class="paragraph"/><div class="code"><pre>grails install&#45;plugin gsp&#45;resources</pre></div>



<h1 id="3. Usage">3 Usage</h1>
In your project resources file, define GSPs as resources like any other resource type:<p class="paragraph"/><div class="code"><pre>'style' &#123;
    resource url:'css/test.css.gsp'
&#125;</pre></div><p class="paragraph"/>The GSP will be compiled to a file with exactly the same file path, but minus the '.gsp'
extension. The type of the compiled file (i.e. in this case 'css') will be automatically
detected from the filename. Should you wish to name your file with a file extension
that is not recognised by the resources plugin, you can optionally explicitly define the
file type of the compiled resource using the following example 	configuration:<p class="paragraph"/><div class="code"><pre>'style' &#123;
    resource url:'somefile.gsp', attrs:&#91;rel: 'stylesheet/css', type:'css'&#93;
&#125;</pre></div><p class="paragraph"/>Note the additional <code>attrs</code> parameter, which is used to tell
the resources plugin the type of the resource being generated. (In this example,
the compiled file will simply be named 'somefile' with no extension.) 


<h1 id="4. Limitations">4 Limitations</h1>
Since this plugin is meant to serve <strong class="bold">static</strong> resources, there is no
inherent data-watching within GSPs. Changes to a GSP file itself will
trigger recompilation, but changes to the data referenced within a GSP will not.



<h1 id="5. Advanced Configuration">5 Advanced Configuration</h1>
One limitation of the resources plugin in connection with GSP compilation
is that the processing of static resources takes place during server startup.<p class="paragraph"/>In fact, the processing could take place before a lot of the core grails
infrastructure has been loaded. If your GSP resources contain <code>&#60;g:include /&#62;</code>
tags, for example, it is possible the grails support for loading other groovy
pages will not yet have been loaded when the resources plugin starts processing
your GSP. This will result in errors!<p class="paragraph"/>To get around this, the gsp-resources plugin provides an additional configuration
option, for delaying the start of resources processing during server startup. The
following configuration option should be placed in <code>grails-app/conf/Config.groovy</code>:<p class="paragraph"/><div class="code"><pre>grails.resources.processing.startup = <span class="java&#45;quote">"delayed"</span></pre></div><p class="paragraph"/>This will delay resources processing until the bootstrap phase - by which point
all required plugins and artefacts should be fully loaded.<p class="paragraph"/>For even finer control, you can disable resources processing during server startup
entirely, with the following configuration:<p class="paragraph"/><div class="code"><pre>grails.resources.processing.startup = <span class="java&#45;keyword">false</span></pre></div><p class="paragraph"/>You can then manually trigger the initial resources processing by adding the
following code to your project's <code>Bootstrap.groovy</code>:<p class="paragraph"/><div class="code"><pre>class BootStrap &#123;<p class="paragraph"/>    // Automatically injected
    def grailsResourceProcessor<p class="paragraph"/>    def init = &#123; servletContext &#45;&#62;<p class="paragraph"/>        // Do whatever preparation you need first
        // E.g. create some objects that your GSPs will need
        // . . .
        // . . .<p class="paragraph"/>        // Finally, start resources processing
        grailsResourceProcessor.start()
    &#125;<p class="paragraph"/>    def destroy = &#123;
    &#125;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/><blockquote class="note">
If no <code>grails.resources.processing.startup</code> configuration option is found in
<code>Config.groovy</code>, or an invalid value is used, then the resources
plugin defaults to its normal startup.
</blockquote>



<h1 id="6. Version History">6 Version History</h1>
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Version</strong></th><th><strong class="bold">Date</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td>0.3</td><td>Mar 21, 2012</td><td>Multiple fixes and enhancements:<br/> <br/> 1) Fix bug causing <code>createLink</code> to break after using gsp-resources<br/> 2) Fix bug causing <code>resource(dir:"/")</code> to render incorrect context path<br/> 3) Automatically detect compiled file type from filename<br/> 4) Support <code>&#60;r:require/&#62;</code>, <code>&#60;g:include/&#62;</code> etc. in GSPs<br/> 5) Support GSP resource files located in plugins <br/> 6) Allow delaying resources processing until bootstrap phase<br/> 7) Process resources in order of <code>dependsOn</code> config</td></tr><tr class="table-even"><td>0.2.1</td><td>Oct 25, 2011</td><td>Set included resources version to 1.1.1, dependsOn to '1.0.2 &#62; *'</td></tr><tr class="table-odd"><td>0.2</td><td>Oct 22, 2011</td><td>Fixed g:createLink<br/>Made plugin compatible with 2.0RC1.</td></tr><tr class="table-even"><td>0.1</td><td>Oct 15, 2011</td><td>Initial implementation</td></tr></table>


<h1 id="7. Special Thanks">7 Special Thanks</h1>
Stefan Kendall for creating the original <a href="https://github.com/stefankendall/gsp-resources" target="blank">gsp-resources plugin</a>,
which was superb and inspired me to get involved to help make it even better!<p class="paragraph"/>Marc Palmer for the excellent <a href="http://grails-plugins.github.com/grails-resources/guide/single.html" target="blank">resources plugin</a>,
without which this plugin would not be possible. 


                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
